# Курс от SkillFactory

## **Профессия Веб-разработчик**

### **Как проверять**

Веб-версии нет. В папке _data_ есть экспорт базы данных. Надо импотировать данные себе и запустить скрипты через файл _index.php_ в директории _public_ командой

`php -S localhost:8080`

Из коммита исключён файл `credentials.php`, необходимый для работы приложения с данными. В папке `Mod32/config/` есть файл `credentials.example.php` с необходимыми полями. Его надо переименовать в `credentials.php`, а в самом файле вписать свои данные.

## 32. Практическая работа

### Задание 32.2.1

Создайте систему аутентификации пользователя.

В форме регистрации собираем логин и пароль пользователя. Проверять, что логин не занят. Пароль сохранять в хэшированном виде с солью. В форме входа необходимо запрашивать логин, пароль и установить чекбокс — «Запомнить меня». Использовать _CSRF_-токен для формы входа.

Если пользователь выбрал чекбокс «Запомнить меня» — нужно создать токен и сохранить его в cookie с заранее выбранным временем жизни. Эта _cookie_ явно не должна быть вечной.

### Задание 32.3.1

К существующей системе аутентификации добавьте свойство роли. Создать пользователей с разными ролями, например администратор и пользователь.

Создайте страницу с любым органом управления (например, кнопка), который будет виден всем пользователям. Но для всех ролей кроме администратора она должна иметь класс `disabled`, а администратор сможет ее нажать. При нажатии кнопки нужно вывести `alert(‘Добро пожаловать’)`.

### Задание 32.4.1

При помощи процедуры, описанной здесь настроить авторизацию через _VK_. Для этого вывести кнопку с надписью «Авторизоваться через _VK»_, которая будет запускать вышеописанный скрипт.

### Задание 32.5.1

Создайте файл `log.txt`. На страницу добавить форму с `textarea`. По нажатию на кнопку необходимо сохранить сообщение из `textarea` в заранее созданный файл `messages.txt`. Предусмотрите проверку на существование `messages.txt`, и если файл отсутствует — нужно записать сообщение об этом. Удалите `messages.txt` и проверьте, что в лог попало сообщение о нештатной ситуации.

## Критерии оценки выполненного задания

1. Система регистраций должна позволять регистрироваться при помощи пары логин-пароль — **+3 балла**
1. Сделать страницу авторизации, на которой пользователь будет вводить заранее созданные логин и пароль — **+3 балла**
1. Сделать авторизацию через _VK_ (для этого на форме регистрации и авторизации нужно выводить отдельную кнопку «Авторизоваться через _VK_..». Страница авторизации должна быть создана с _CSRF_-токеном — **+10 баллов**
1. Сделать систему с ролями «обычный пользователь» и «пользователь _VK»_ — **+5 баллов**
1. Сделать страницу, на которую нельзя попасть, пока пользователь не авторизован. На этой странице необходимо отобразить один абзац текста и одну картинку. Текст должен быть виден всем авторизованным пользователям, картинка — только пользователям с ролью «пользователь _VK»_ — **+6 баллов**
1. Сделать систему хранения логов, которая будет записывать все неудачные попытки авторизации через логин и пароль — **+3 балла**

## Screenshots

![Screenshot 1](./pix/Mod32_1.png '1')
![Screenshot 2](./pix/Mod32_2.png '2')
![Screenshot 3](./pix/Mod32_3.png '3')
![Screenshot 4](./pix/Mod32_4.png '4')
